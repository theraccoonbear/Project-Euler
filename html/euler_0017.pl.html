<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by perltidy on Fri Jan 22 09:48:07 2010 -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>euler_0017.pl</title>
<style type="text/css">
<!--
/* default style sheet generated by perltidy */
body {background: #FFFFFF; color: #000000}
pre { color: #000000; 
      background: #FFFFFF;
      font-family: courier;
    } 

.c  { color: #228B22;} /* comment */
.cm { color: #000000;} /* comma */
.co { color: #000000;} /* colon */
.h  { color: #CD5555; font-weight:bold;} /* here-doc-target */
.hh { color: #CD5555; font-style:italic;} /* here-doc-text */
.i  { color: #00688B;} /* identifier */
.j  { color: #CD5555; font-weight:bold;} /* label */
.k  { color: #8B008B; font-weight:bold;} /* keyword */
.m  { color: #FF0000; font-weight:bold;} /* subroutine */
.n  { color: #B452CD;} /* numeric */
.p  { color: #000000;} /* paren */
.pd { color: #228B22; font-style:italic;} /* pod-text */
.pu { color: #000000;} /* punctuation */
.q  { color: #CD5555;} /* quote */
.s  { color: #000000;} /* structure */
.sc { color: #000000;} /* semicolon */
.v  { color: #B452CD;} /* v-string */
.w  { color: #000000;} /* bareword */
-->
</style>
</head>
<body>
<a name="-top-"></a>
<h1>euler_0017.pl</h1>
<!-- BEGIN CODE INDEX --><a name="code-index"></a>
<ul>
<li><a href="#numberToWord-">package main</a>
<ul>
<li><a href="#numberToWord-">numberToWord</a></li>
</ul>
</li>
<li><a href="#EOF-">EOF</a></li>
</ul>
<!-- END CODE INDEX -->
<hr />
<!-- contents of filename: euler_0017.pl -->
<pre>
#!/opt/local/bin/perl

<span class="c"># Project Euler Problem #17</span>
<span class="c">#</span>
<span class="c"># If the numbers 1 to 5 are written out in words: one, two, three, four, five, then there are 3 + 3 + 5 + 4 + 4 = 19 letters used in total.</span>
<span class="c">#</span>
<span class="c"># If all the numbers from 1 to 1000 (one thousand) inclusive were written out in words, how many letters would be used?</span>
<span class="c"># </span>
<span class="c"># NOTE: Do not count spaces or hyphens. For example, 342 (three hundred and forty-two) contains 23 letters and 115 (one hundred and fifteen) contains 20 letters. The use of &quot;and&quot; when writing out numbers is in compliance with British usage.</span>

<span class="k">use</span> <span class="w">strict</span><span class="sc">;</span>
<span class="k">use</span> <span class="w">warnings</span><span class="sc">;</span>
<span class="k">require</span> <span class="q">&quot;/Users/don/bin/scripts/euler/functions.pm&quot;</span><span class="sc">;</span>

<span class="c"># Disable output buffering</span>
<span class="k">select</span><span class="s">(</span><span class="s">(</span><span class="k">select</span><span class="s">(</span><span class="w">STDOUT</span><span class="s">)</span><span class="cm">,</span> <span class="i">$|</span>=<span class="n">1</span><span class="s">)</span>[<span class="n">0</span>]<span class="s">)</span><span class="sc">;</span>


<span class="k">my</span> <span class="i">%ones_teens_map</span> = <span class="s">(</span>
  <span class="q">&#39;0&#39;</span>   <span class="cm">=&gt;</span> <span class="q">&#39;&#39;</span><span class="cm">,</span>
  <span class="q">&#39;1&#39;</span>   <span class="cm">=&gt;</span> <span class="q">&#39;one&#39;</span><span class="cm">,</span>
  <span class="q">&#39;2&#39;</span>   <span class="cm">=&gt;</span> <span class="q">&#39;two&#39;</span><span class="cm">,</span>
  <span class="q">&#39;3&#39;</span>   <span class="cm">=&gt;</span> <span class="q">&#39;three&#39;</span><span class="cm">,</span>
  <span class="q">&#39;4&#39;</span>   <span class="cm">=&gt;</span> <span class="q">&#39;four&#39;</span><span class="cm">,</span>
  <span class="q">&#39;5&#39;</span>   <span class="cm">=&gt;</span> <span class="q">&#39;five&#39;</span><span class="cm">,</span>
  <span class="q">&#39;6&#39;</span>   <span class="cm">=&gt;</span> <span class="q">&#39;six&#39;</span><span class="cm">,</span>
  <span class="q">&#39;7&#39;</span>   <span class="cm">=&gt;</span> <span class="q">&#39;seven&#39;</span><span class="cm">,</span>
  <span class="q">&#39;8&#39;</span>   <span class="cm">=&gt;</span> <span class="q">&#39;eight&#39;</span><span class="cm">,</span>
  <span class="q">&#39;9&#39;</span>   <span class="cm">=&gt;</span> <span class="q">&#39;nine&#39;</span><span class="cm">,</span>
  <span class="q">&#39;10&#39;</span>  <span class="cm">=&gt;</span> <span class="q">&#39;ten&#39;</span><span class="cm">,</span>
  <span class="q">&#39;11&#39;</span>  <span class="cm">=&gt;</span> <span class="q">&#39;eleven&#39;</span><span class="cm">,</span>
  <span class="q">&#39;12&#39;</span>  <span class="cm">=&gt;</span> <span class="q">&#39;twelve&#39;</span><span class="cm">,</span>
  <span class="q">&#39;13&#39;</span>  <span class="cm">=&gt;</span> <span class="q">&#39;thirteen&#39;</span><span class="cm">,</span>
  <span class="q">&#39;14&#39;</span>  <span class="cm">=&gt;</span> <span class="q">&#39;fourteen&#39;</span><span class="cm">,</span>
  <span class="q">&#39;15&#39;</span>  <span class="cm">=&gt;</span> <span class="q">&#39;fifteen&#39;</span><span class="cm">,</span>
  <span class="q">&#39;16&#39;</span>  <span class="cm">=&gt;</span>  <span class="q">&#39;sixteen&#39;</span><span class="cm">,</span>
  <span class="q">&#39;17&#39;</span>  <span class="cm">=&gt;</span> <span class="q">&#39;seventeen&#39;</span><span class="cm">,</span>
  <span class="q">&#39;18&#39;</span>  <span class="cm">=&gt;</span> <span class="q">&#39;eighteen&#39;</span><span class="cm">,</span>
  <span class="q">&#39;19&#39;</span>  <span class="cm">=&gt;</span> <span class="q">&#39;nineteen&#39;</span>
<span class="s">)</span><span class="sc">;</span>

<span class="k">my</span> <span class="i">%tens_map</span> = <span class="s">(</span>
  <span class="q">&#39;2&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;twenty&#39;</span><span class="cm">,</span>
  <span class="q">&#39;3&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;thirty&#39;</span><span class="cm">,</span>
  <span class="q">&#39;4&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;forty&#39;</span><span class="cm">,</span>
  <span class="q">&#39;5&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;fifty&#39;</span><span class="cm">,</span>
  <span class="q">&#39;6&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;sixty&#39;</span><span class="cm">,</span>
  <span class="q">&#39;7&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;seventy&#39;</span><span class="cm">,</span>
  <span class="q">&#39;8&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;eighty&#39;</span><span class="cm">,</span>
  <span class="q">&#39;9&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;ninety&#39;</span><span class="cm">,</span>
<span class="s">)</span><span class="sc">;</span>

<a name="numberToWord-"></a><span class="k">sub </span><span class="m">numberToWord($)</span> <span class="s">{</span>
  <span class="k">my</span> <span class="i">$val</span> = <span class="k">shift</span> <span class="i">@_</span><span class="sc">;</span>
  <span class="k">my</span> <span class="i">$result</span> = <span class="q">&#39;&#39;</span><span class="sc">;</span>
  <span class="k">my</span> <span class="s">(</span><span class="i">$ones</span><span class="cm">,</span> <span class="i">$tens</span><span class="cm">,</span> <span class="i">$hundreds</span><span class="cm">,</span> <span class="i">$thousands</span><span class="s">)</span> = <span class="s">(</span><span class="n">0</span><span class="cm">,</span><span class="n">0</span><span class="cm">,</span><span class="n">0</span><span class="cm">,</span><span class="n">0</span><span class="s">)</span><span class="sc">;</span>
  
  <span class="k">if</span> <span class="s">(</span><span class="i">$val</span> &lt; <span class="n">20</span><span class="s">)</span> <span class="s">{</span>
    <span class="i">$result</span> = <span class="i">$ones_teens_map</span>{<span class="i">$val</span>}<span class="sc">;</span>
  <span class="s">}</span> <span class="k">else</span> <span class="s">{</span>
    <span class="k">if</span> <span class="s">(</span><span class="i">$val</span> =~ <span class="q">m/^\d{2,4}$/</span><span class="s">)</span> <span class="s">{</span>
      <span class="k">my</span> <span class="i">@digits</span> = <span class="k">split</span><span class="s">(</span><span class="q">//</span><span class="cm">,</span> <span class="i">$val</span><span class="s">)</span><span class="sc">;</span>
      <span class="i">$ones</span> = <span class="i">$digits</span>[<span class="n">-1</span>]<span class="sc">;</span>
      <span class="i">$tens</span> = <span class="i">$digits</span>[<span class="n">-2</span>]<span class="sc">;</span>
      <span class="i">$hundreds</span> = <span class="i">$digits</span>[<span class="n">-3</span>]<span class="sc">;</span>
      <span class="i">$thousands</span> = <span class="i">$digits</span>[<span class="n">-4</span>]<span class="sc">;</span>
      
      <span class="i">$result</span> .= <span class="s">(</span><span class="k">defined</span> <span class="i">$thousands</span> &amp;&amp; <span class="i">$thousands</span> != <span class="n">0</span>? <span class="i">$ones_teens_map</span>{<span class="i">$thousands</span>} . <span class="q">&#39; thousand&#39;</span> <span class="co">:</span> <span class="q">&#39;&#39;</span><span class="s">)</span><span class="sc">;</span>
      <span class="i">$result</span> .= <span class="s">(</span><span class="k">defined</span> <span class="i">$hundreds</span> &amp;&amp; <span class="i">$hundreds</span> != <span class="n">0</span> ? <span class="i">$ones_teens_map</span>{<span class="i">$hundreds</span>} . <span class="q">&#39; hundred &#39;</span> . <span class="s">(</span><span class="i">$tens</span> != <span class="n">0</span> || <span class="i">$ones</span> != <span class="n">0</span> ? <span class="q">&#39;and &#39;</span> <span class="co">:</span> <span class="q">&#39;&#39;</span><span class="s">)</span><span class="co">:</span> <span class="q">&#39;&#39;</span><span class="s">)</span><span class="sc">;</span>
      <span class="i">$result</span> .= <span class="s">(</span><span class="k">defined</span> <span class="i">$ones_teens_map</span>{<span class="i">$tens</span> . <span class="i">$ones</span>} ? <span class="i">$ones_teens_map</span>{<span class="i">$tens</span> . <span class="i">$ones</span>} <span class="co">:</span> <span class="s">(</span><span class="k">defined</span> <span class="i">$tens</span> &amp;&amp; <span class="i">$tens</span>  != <span class="n">0</span> ? <span class="i">$tens_map</span>{<span class="i">$tens</span>}  . <span class="s">(</span><span class="i">$ones</span> != <span class="n">0</span> ? <span class="q">&#39;-&#39;</span> <span class="co">:</span> <span class="q">&#39;&#39;</span><span class="s">)</span> <span class="co">:</span> <span class="q">&#39;&#39;</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span>
      <span class="i">$result</span> .= <span class="s">(</span><span class="k">defined</span> <span class="i">$ones</span> &amp;&amp; <span class="i">$ones</span> != <span class="n">0</span> &amp;&amp; !<span class="k">defined</span> <span class="i">$ones_teens_map</span>{<span class="i">$tens</span> .  <span class="i">$ones</span>} ? <span class="i">$ones_teens_map</span>{<span class="i">$ones</span>} <span class="co">:</span> <span class="q">&#39;&#39;</span><span class="s">)</span><span class="sc">;</span>
    <span class="s">}</span> <span class="k">else</span> <span class="s">{</span>
      <span class="i">dbgMsg</span><span class="s">(</span><span class="q">&quot;WTF? $val\n&quot;</span><span class="s">)</span><span class="sc">;</span>
    <span class="s">}</span>
  <span class="s">}</span>
  
  <span class="k">return</span> <span class="i">$result</span><span class="sc">;</span>
  
<span class="s">}</span>

<span class="k">my</span> <span class="i">$letter_cnt</span>= <span class="n">0</span><span class="sc">;</span>

<span class="c">#debugOff();</span>

<span class="k">for</span> <span class="s">(</span><span class="k">my</span> <span class="i">$x</span> = <span class="n">1</span><span class="sc">;</span> <span class="i">$x</span> &lt;= <span class="n">1000</span><span class="sc">;</span> <span class="i">$x</span>++<span class="s">)</span> <span class="s">{</span>
  <span class="k">my</span> <span class="i">$word</span> = <span class="i">numberToWord</span><span class="s">(</span><span class="i">$x</span><span class="s">)</span><span class="sc">;</span>
  <span class="i">dbgMsg</span><span class="s">(</span><span class="q">&quot;$x = $word = &quot;</span><span class="s">)</span><span class="sc">;</span>
  <span class="i">$word</span> =~ <span class="q">s/[^A-Za-z]+//g</span><span class="sc">;</span>
  <span class="i">$letter_cnt</span> += <span class="k">length</span><span class="s">(</span><span class="i">$word</span><span class="s">)</span><span class="sc">;</span>
  <span class="i">dbgMsg</span><span class="s">(</span><span class="k">length</span><span class="s">(</span><span class="i">$word</span><span class="s">)</span> . <span class="q">&quot; = &quot;</span> . <span class="i">$letter_cnt</span> . <span class="q">&quot;\n&quot;</span><span class="s">)</span><span class="sc">;</span>
<span class="s">}</span>

<span class="k">print</span> <span class="q">&quot;\n\nAnswer: $letter_cnt\n\n&quot;</span><span class="sc">;</span>


<span class="c"># Answer: 21124</span>
<a name="EOF-"></a></pre>
</body>
</html>
