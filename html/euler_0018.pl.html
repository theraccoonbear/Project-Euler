<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by perltidy on Fri Jan 22 09:48:08 2010 -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>euler_0018.pl</title>
<style type="text/css">
<!--
/* default style sheet generated by perltidy */
body {background: #FFFFFF; color: #000000}
pre { color: #000000; 
      background: #FFFFFF;
      font-family: courier;
    } 

.c  { color: #228B22;} /* comment */
.cm { color: #000000;} /* comma */
.co { color: #000000;} /* colon */
.h  { color: #CD5555; font-weight:bold;} /* here-doc-target */
.hh { color: #CD5555; font-style:italic;} /* here-doc-text */
.i  { color: #00688B;} /* identifier */
.j  { color: #CD5555; font-weight:bold;} /* label */
.k  { color: #8B008B; font-weight:bold;} /* keyword */
.m  { color: #FF0000; font-weight:bold;} /* subroutine */
.n  { color: #B452CD;} /* numeric */
.p  { color: #000000;} /* paren */
.pd { color: #228B22; font-style:italic;} /* pod-text */
.pu { color: #000000;} /* punctuation */
.q  { color: #CD5555;} /* quote */
.s  { color: #000000;} /* structure */
.sc { color: #000000;} /* semicolon */
.v  { color: #B452CD;} /* v-string */
.w  { color: #000000;} /* bareword */
-->
</style>
</head>
<body>
<a name="-top-"></a>
<h1>euler_0018.pl</h1>
<hr />
<!-- contents of filename: euler_0018.pl -->
<pre>
#!/opt/local/bin/perl

<span class="c"># Project Euler Problem #18</span>
<span class="c">#</span>
<span class="c"># By starting at the top of the triangle below and moving to adjacent numbers on the row below, the maximum total from top to bottom is 23.</span>
<span class="c"># </span>
<span class="c"># 3</span>
<span class="c"># 7 4</span>
<span class="c"># 2 4 6</span>
<span class="c"># 8 5 9 3</span>
<span class="c"># </span>
<span class="c"># That is, 3 + 7 + 4 + 9 = 23.</span>
<span class="c"># </span>
<span class="c"># Find the maximum total from top to bottom of the triangle below:</span>
<span class="c"># </span>
<span class="c"># 75</span>
<span class="c"># 95 64</span>
<span class="c"># 17 47 82</span>
<span class="c"># 18 35 87 10</span>
<span class="c"># 20 04 82 47 65</span>
<span class="c"># 19 01 23 75 03 34</span>
<span class="c"># 88 02 77 73 07 63 67</span>
<span class="c"># 99 65 04 28 06 16 70 92</span>
<span class="c"># 41 41 26 56 83 40 80 70 33</span>
<span class="c"># 41 48 72 33 47 32 37 16 94 29</span>
<span class="c"># 53 71 44 65 25 43 91 52 97 51 14</span>
<span class="c"># 70 11 33 28 77 73 17 78 39 68 17 57</span>
<span class="c"># 91 71 52 38 17 14 91 43 58 50 27 29 48</span>
<span class="c"># 63 66 04 68 89 53 67 30 73 16 69 87 40 31</span>
<span class="c"># 04 62 98 27 23 09 70 98 73 93 38 53 60 04 23</span>
<span class="c"># </span>
<span class="c"># NOTE: As there are only 16384 routes, it is possible to solve this problem by trying every route. However, Problem 67, is the same challenge with a triangle containing one-hundred rows; it cannot be solved by brute force, and requires a clever method! ;o)</span>
<span class="k">use</span> <span class="w">strict</span><span class="sc">;</span>
<span class="k">use</span> <span class="w">warnings</span><span class="sc">;</span>
<span class="k">use</span> <span class="w">List::Util</span> <span class="q">qw[min max]</span><span class="sc">;</span>

<span class="k">require</span> <span class="q">&quot;/Users/don/bin/scripts/euler/functions.pm&quot;</span><span class="sc">;</span>

<span class="c"># Disable output buffering</span>
<span class="k">select</span><span class="s">(</span><span class="s">(</span><span class="k">select</span><span class="s">(</span><span class="w">STDOUT</span><span class="s">)</span><span class="cm">,</span> <span class="i">$|</span>=<span class="n">1</span><span class="s">)</span>[<span class="n">0</span>]<span class="s">)</span><span class="sc">;</span>

<span class="i">startTiming</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>

<span class="k">my</span> <span class="i">$triangle</span> = <span class="h">&lt;&lt;__TRI</span><span class="sc">;</span>
<span class="hh">75</span>
<span class="hh">95 64</span>
<span class="hh">17 47 82</span>
<span class="hh">18 35 87 10</span>
<span class="hh">20 04 82 47 65</span>
<span class="hh">19 01 23 75 03 34</span>
<span class="hh">88 02 77 73 07 63 67</span>
<span class="hh">99 65 04 28 06 16 70 92</span>
<span class="hh">41 41 26 56 83 40 80 70 33</span>
<span class="hh">41 48 72 33 47 32 37 16 94 29</span>
<span class="hh">53 71 44 65 25 43 91 52 97 51 14</span>
<span class="hh">70 11 33 28 77 73 17 78 39 68 17 57</span>
<span class="hh">91 71 52 38 17 14 91 43 58 50 27 29 48</span>
<span class="hh">63 66 04 68 89 53 67 30 73 16 69 87 40 31</span>
<span class="hh">04 62 98 27 23 09 70 98 73 93 38 53 60 04 23</span>
<span class="h">__TRI</span>


<span class="k">chop</span><span class="s">(</span><span class="i">$triangle</span><span class="s">)</span><span class="sc">;</span>

<span class="i">dbgMsg</span><span class="s">(</span><span class="q">&quot;\n\n&quot;</span><span class="s">)</span><span class="sc">;</span>

<span class="k">my</span> <span class="i">$tree</span><span class="sc">;</span>
<span class="k">my</span> <span class="i">$row</span> = <span class="n">0</span><span class="sc">;</span>
<span class="k">my</span> <span class="i">$col</span> = <span class="n">0</span><span class="sc">;</span>
<span class="k">my</span> <span class="i">@last_line</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span>

<span class="k">for</span> <span class="k">my</span> <span class="i">$line</span> <span class="s">(</span><span class="k">reverse</span> <span class="k">split</span><span class="s">(</span><span class="q">/\n/</span><span class="cm">,</span> <span class="i">$triangle</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
  <span class="i">$col</span> = <span class="n">0</span><span class="sc">;</span>
  <span class="k">print</span> <span class="q">&#39;   &#39;</span> x <span class="s">(</span><span class="n">25</span> - <span class="k">length</span><span class="s">(</span><span class="i">$line</span><span class="s">)</span> / <span class="n">2</span><span class="s">)</span><span class="sc">;</span>
  
  <span class="k">for</span> <span class="k">my</span> <span class="i">$val</span> <span class="s">(</span><span class="k">split</span><span class="s">(</span><span class="q">/\s+/</span><span class="cm">,</span> <span class="i">$line</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
    <span class="i">$tree</span>-&gt;[<span class="i">$row</span>]-&gt;[<span class="i">$col</span>]-&gt;{<span class="q">&#39;val&#39;</span>} = <span class="i">$val</span><span class="sc">;</span>
    
    <span class="k">if</span> <span class="s">(</span><span class="i">$row</span> &gt; <span class="n">0</span><span class="s">)</span> <span class="s">{</span>
      <span class="i">$tree</span>-&gt;[<span class="i">$row</span>]-&gt;[<span class="i">$col</span>]-&gt;{<span class="q">&#39;rt&#39;</span>} = <span class="i">$val</span> + <span class="i">max</span><span class="s">(</span><span class="i">$tree</span>-&gt;[<span class="i">$row</span> - <span class="n">1</span>]-&gt;[<span class="i">$col</span>]-&gt;{<span class="q">&#39;rt&#39;</span>}<span class="cm">,</span> <span class="i">$tree</span>-&gt;[<span class="i">$row</span> - <span class="n">1</span>]-&gt;[<span class="i">$col</span> + <span class="n">1</span>]-&gt;{<span class="q">&#39;rt&#39;</span>}<span class="s">)</span><span class="sc">;</span>
      <span class="i">$tree</span>-&gt;[<span class="i">$row</span>]-&gt;[<span class="i">$col</span>]-&gt;{<span class="q">&#39;next&#39;</span>} = <span class="i">max</span><span class="s">(</span><span class="i">$tree</span>-&gt;[<span class="i">$row</span> - <span class="n">1</span>]-&gt;[<span class="i">$col</span>]-&gt;{<span class="q">&#39;val&#39;</span>}<span class="cm">,</span> <span class="i">$tree</span>-&gt;[<span class="i">$row</span> - <span class="n">1</span>]-&gt;[<span class="i">$col</span> + <span class="n">1</span>]-&gt;{<span class="q">&#39;val&#39;</span>}<span class="s">)</span><span class="sc">;</span>
    <span class="s">}</span> <span class="k">else</span> <span class="s">{</span>
      <span class="i">$tree</span>-&gt;[<span class="i">$row</span>]-&gt;[<span class="i">$col</span>]-&gt;{<span class="q">&#39;rt&#39;</span>} = <span class="i">$val</span><span class="sc">;</span>
      <span class="i">$tree</span>-&gt;[<span class="i">$row</span>]-&gt;[<span class="i">$col</span>]-&gt;{<span class="q">&#39;next&#39;</span>} = <span class="q">&#39;00&#39;</span><span class="sc">;</span>
    <span class="s">}</span>
    
    <span class="k">my</span> <span class="i">$rt</span> = <span class="i">$tree</span>-&gt;[<span class="i">$row</span>]-&gt;[<span class="i">$col</span>]-&gt;{<span class="q">&#39;rt&#39;</span>}<span class="sc">;</span>
    <span class="k">my</span> <span class="i">$next</span> = <span class="i">$tree</span>-&gt;[<span class="i">$row</span>]-&gt;[<span class="i">$col</span>]-&gt;{<span class="q">&#39;next&#39;</span>}<span class="sc">;</span>
    <span class="k">print</span> <span class="q">&quot;$val [$next:$rt] &quot;</span><span class="sc">;</span>
    <span class="i">$col</span>++<span class="sc">;</span>
  <span class="s">}</span>
    
  <span class="k">print</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span>
  <span class="i">$row</span>++<span class="sc">;</span>
<span class="s">}</span>

<span class="c"># Answer: 1074</span>
</pre>
</body>
</html>
